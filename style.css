/* ============================
   0) Variables & Reset
============================ */
:root{
  --bg:#efefef;
  --fg:#0b0b0b;
  --muted:#6b6b6b;
  --frame:#cfcfcf;
  --accent:#0ea5e9;
  --radius:10px;
  --space:clamp(16px, 3vw, 48px);
}
:root.dark{
  --bg:#0b0b0b;
  --fg:#ececec;
  --muted:#a3a3a3;
  --frame:#2a2a2a;
}

/* Respecte le thème système par défaut (facultatif) */
@media (prefers-color-scheme: dark){
  :root:not(.light){ color-scheme: dark; }
}

/* Reset minimal & typo */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: "Zen Kaku Gothic New", Inter, system-ui, Arial, sans-serif;
  background:var(--bg);
  color:var(--fg);
  line-height:1.5;
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Transitions douces (limitées) */
html:not(.no-anim) body,
html:not(.no-anim) .frame,
html:not(.no-anim) .cat-btn,
html:not(.no-anim) .theme-bottom-right,
html:not(.no-anim) .lang-left{
  transition:
    background-color .35s ease,
    color .35s ease,
    border-color .35s ease,
    box-shadow .35s ease;
}

/* Pas d'anim si l’utilisateur réduit les mouvements */
@media (prefers-reduced-motion: reduce){
  *{ transition:none !important; animation:none !important; }
}
html.no-anim, html.no-anim *{ transition:none !important; }

/* ============================
   1) Layout principal
============================ */
.frame{
  position:fixed;
  inset: max(8px, env(safe-area-inset-top)) max(8px, env(safe-area-inset-right)) max(8px, env(safe-area-inset-bottom)) max(8px, env(safe-area-inset-left));
  margin:15px;
  border:1px solid var(--frame);
  border-radius:var(--radius);
  pointer-events:none;
}

/* Conteneur */
.shell{
  max-width:1100px;
  margin:0 auto;
  padding:clamp(28px, 6vw, 60px) clamp(20px, 5vw, 48px);
}

/* Header */
header{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:16px;
}
header h1{
  margin:0;
  font-weight:500;
  letter-spacing:.4px;
  font-size:clamp(24px, 5vw, 48px);
}
.role{
  margin-top:4px;
  font-size:clamp(12px, 1.6vw, 14px);
  color:var(--muted);
}
.lang a{
  margin-left:12px;
  text-decoration:none;
  color:var(--fg);
  font-weight:600;
}
.lang a[aria-current="page"]{ text-decoration:underline; }

/* Corps & Bio */
.bio-only{ margin-top:28px; min-height:40vh; }
.bio{
  max-width:42ch;
  margin-left:auto;
  font-size:clamp(13px, 1.6vw, 15px);
}
.bio p{ margin:30px 0; }

/* ============================
   2) Sélecteur de langue (rail)
============================ */
/* Par défaut (desktop) : colonne fixée à gauche */
.lang-left{
  position:fixed;
  left:12px;                 /* aligné au frame (inset:12px) */
  top:35%;
  transform:translate(-50%, -50%);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  z-index:20;
  margin:15px;
  padding:8px 6px;
  border:1px solid var(--frame);
  border-radius:6px;
  background:var(--bg);
  backdrop-filter:saturate(110%) blur(2px);
}

/* Icônes/drapeaux touch-friendly */
.lang-left a{
  display:grid;
  place-items:center;
  width:40px; height:40px;            /* cible tactile ≥ 40px */
  border-radius:8px;
}
.lang-left a img{
  width:22px; height:22px;
  display:block; object-fit:contain;
  border-radius:4px;
}
.lang-left a:hover img{ transform:translateY(-1px); filter:contrast(110%); }

/* Sur mobile : barre horizontale en bas-gauche */
@media (max-width:600px){
  .lang-left{
    left:auto; right:auto;
    top:auto; bottom: max(12px, env(safe-area-inset-bottom));
    transform:none;
    flex-direction:row;
    gap:8px;
    margin:0;
    padding:6px 8px;
    border-radius:999px;
  }
}

/* ============================
   3) Toggle Light/Dark (rail)
============================ */
.theme-bottom-right{
  position:fixed;
  right:12px;
  bottom:3%;
  transform:translate(50%, 50%);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
  z-index:20;
  margin:10% 15px;
  padding:8px 10px;
  border:1px solid var(--frame);
  border-radius:8px;
  background:var(--bg);
  backdrop-filter:saturate(110%) blur(2px);
}

.toggle-item{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}

/* carrés */
.theme-bottom-right .swatch{
  width:16px; height:16px;
  border:1px solid var(--frame);
  background:var(--bg);
  border-radius:3px;
  transition:background .2s ease, border-color .2s ease;
}
.theme-bottom-right .swatch.active{ background:var(--fg); }

/* libellés verticaux (desktop) */
.theme-bottom-right .label{
  writing-mode:vertical-rl;
  font-size:11px;
  color:var(--muted);
  letter-spacing:.12em;
  user-select:none;
  transition:color .2s ease;
}
.toggle-item:hover .label{ color:var(--fg); }

/* Sur petits écrans : rangée horizontale, lisible + tap-targets */
@media (max-width:600px){
  .theme-bottom-right{
    right: max(12px, env(safe-area-inset-right));
    bottom: max(12px, env(safe-area-inset-bottom));
    transform:none;
    margin:0;
    padding:8px 10px;
    flex-direction:row;
    gap:12px;
    border-radius:999px;
  }
  .toggle-item{
    flex-direction:row;
    gap:8px;
  }
  .theme-bottom-right .label{
    writing-mode:horizontal-tb;
    font-size:12px;
    letter-spacing:.02em;
  }
}

/* ============================
   4) Catégories (barre & boutons)
============================ */
.categories{
  display:flex;
  gap:8px;
  margin:20px 0 8px;
  flex-wrap:wrap;
}
.cat-btn{
  border:1px solid var(--frame);
  background:transparent;
  color:var(--fg);
  padding:8px 12px;
  border-radius:999px;
  font-size:13px;
  letter-spacing:.02em;
  cursor:pointer;
  user-select:none;
  transition:
    transform .12s ease,
    background-color .2s ease,
    color .2s ease,
    border-color .2s ease,
    box-shadow .2s ease;
}
.cat-btn:hover{ transform:translateY(-1px); }
.cat-btn:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.cat-btn.active{
  background:var(--accent);
  color:#fff;
  border-color:transparent;
  box-shadow:0 0 0 2px color-mix(in oklab, var(--accent) 55%, transparent);
}

/* Apparition douce des éléments de .bio */
@keyframes giremu-fade{
  from{ opacity:0; transform:translateY(2px); }
  to{ opacity:1; transform:none; }
}
.bio > *{ animation:giremu-fade .18s ease-out; }

/* ============================
   5) Responsif – breakpoints
============================ */
/* ≤ 900px : bio pleine largeur, paddings adoucis */
@media (max-width:900px){
  .bio{ margin-left:0; max-width:100%; }
  .shell{ padding:clamp(20px, 5vw, 40px) clamp(16px, 4vw, 32px); }
}

/* ≤ 600px : hiérarchie visuelle, ergonomie */
@media (max-width:600px){
  header{ align-items:flex-start; gap:10px; }
  header h1{ font-size:clamp(22px, 8vw, 32px); }
  .role{ font-size:12px; }
  .categories{ gap:6px; }
  .cat-btn{ padding:7px 10px; font-size:12px; }
  .frame{
    /* réduit l’encombrement du cadre sur mobile */
    margin:8px;
    border-radius:8px;
  }
}

/* ≥ 1200px : ré-élargir confortablement */
@media (min-width:1200px){
  .shell{ padding:60px 48px; }
  .bio{ max-width:48ch; }
}
